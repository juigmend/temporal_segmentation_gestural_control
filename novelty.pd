#N canvas 140 654 686 145 12;
#X declare -lib iemmatrix;
#X declare -lib list-abs;
#X declare -lib iemmatrix;
#X declare -lib list-abs;
#X declare -lib iemmatrix;
#X declare -lib hexloader;
#X declare -lib iemmatrix;
#X declare -lib iemmatrix;
#X declare -lib iemmatrix;
#X declare -lib iemmatrix;
#X declare -lib list-abs;
#X declare -lib iemmatrix;
#X declare -lib smlib;
#X declare -lib iemmatrix;
#X declare -lib hexloader;
#X declare -lib iemmatrix;
#X declare -lib iemmatrix;
#X declare -lib hexloader;
#X obj 323 11 inlet reset;
#X obj 121 101 outlet pk;
#X obj 19 101 outlet nov;
#X obj 121 11 inlet parameters;
#N canvas 151 644 515 447 segmentation 0;
#N canvas 287 295 274 239 peaks 0;
#X obj 10 16 inlet y;
#X obj 112 196 outlet;
#X obj 112 16 inlet threshold;
#X obj 10 76 local_max;
#X text 119 116 prevent double-taps;
#X obj 10 116 interrupt 250;
#X obj 80 166 moses;
#X connect 0 0 3 0;
#X connect 2 0 6 1;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 6 1 1 0;
#X restore 304 239 pd peaks;
#X obj -30 219 vradio 20 1 0 3 \$0-ns_select_mv_snd \$0-ns_select_mv_rcv
empty 0 -8 0 10 -262144 -1 -1 0;
#X obj -30 289 tgl 20 0 \$0-ns_select_mv_norm_snd \$0-ns_select_mv_norm_rcv
empty 17 7 0 10 -262144 -1 -1 0 1;
#X text -9 219 none;
#X text -9 239 distance;
#X text -8 258 kernel;
#X text -8 287 normalise;
#X obj 275 99 int;
#N canvas 527 573 256 281 gauss_filter 0;
#X obj 24 16 inlet signal;
#X obj 134 16 inlet size;
#X obj 131 246 outlet;
#X obj 131 215 gauss_filter;
#X obj 24 185 spigot;
#X obj 95 185 spigot;
#X obj 104 146 abs;
#X obj 104 116 - 1;
#X obj 134 46 t f f;
#X obj 134 76 > 1;
#X obj 166 185 moses 2;
#X connect 0 0 4 0;
#X connect 0 0 5 0;
#X connect 1 0 8 0;
#X connect 3 0 2 0;
#X connect 4 0 2 0;
#X connect 5 0 3 0;
#X connect 6 0 4 1;
#X connect 7 0 6 0;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 9 0 7 0;
#X connect 9 0 5 1;
#X connect 10 1 3 1;
#X restore 90 139 pd gauss_filter;
#X obj 275 69 * 1;
#X obj 90 199 autoscale;
#X obj -44 -51 inlet;
#X obj 230 -51 inlet;
#X obj 90 339 outlet;
#X obj 304 339 outlet;
#X obj 121 -51 r \$0-reset_snd;
#X obj 150 169 r \$0-reset_snd;
#X obj 110 269 s \$0-nov;
#X text -45 190 DISPLAY:;
#X text -45 170 HEATMAP;
#N canvas 420 628 493 392 checkerboard_correlation_ND 0;
#X obj 186 8 import iemmatrix;
#X obj -109 330 outlet novelty;
#X text -174 112 (1);
#X text 58 113 (2);
#X obj 88 330 outlet K;
#X obj 186 38 import hexloader;
#X text -174 181 (3);
#X text -174 270 (4);
#X obj 88 202 mtx_tril;
#X text -147 82 (c.f. Foote 2000);
#X obj -149 270 mtx_mul;
#X text -167 62 4) product with gaussian-tapered checkerboard kernel
;
#X obj 88 172 gausstaper_checkerboard_kernel;
#X obj 4 330 outlet ssm;
#X obj -149 300 list split 3;
#X obj -149 112 inlet ND;
#X text -167 5 1) N-Dimensional signal (stream of lists);
#X obj -149 182 olssm_ND;
#X obj 88 112 inlet N_n;
#X msg 88 142 \$2;
#X text -167 24 2) number of dimensions (N) and window size (n);
#X text -167 43 3) taxicab distance self-similarity matrix;
#X connect 8 0 10 1;
#X connect 8 0 4 0;
#X connect 10 0 14 0;
#X connect 12 0 8 0;
#X connect 14 1 1 0;
#X connect 15 0 17 0;
#X connect 17 0 13 0;
#X connect 17 0 10 0;
#X connect 18 0 19 0;
#X connect 18 0 17 1;
#X connect 19 0 12 0;
#X restore -45 69 pd checkerboard_correlation_ND;
#X obj -44 9 s \$0-rs_ND;
#X obj -45 39 r \$0-rs_ND;
#X obj -44 -24 list-autoscale 0.01 0.99;
#N canvas 242 319 556 357 display_____ 0;
#X obj 7 6 inlet d;
#X obj 487 6 inlet K;
#X obj 287 246 mtx;
#X obj 7 196 spigot;
#X msg 46 156 1;
#X msg 86 156 0;
#X obj 157 66 select 0 1 2;
#X msg 157 127 0;
#X msg 211 157 1;
#X obj 287 216 bang;
#X obj 287 186 spigot;
#X msg 326 146 1;
#X msg 376 146 0;
#X obj 157 36 r \$0-ns_select_mv_snd;
#X obj 287 66 r \$0-ns_select_mv_norm_snd;
#X obj 57 256 spigot;
#X msg 96 196 1;
#X msg 116 256 0;
#X obj 487 136 t b a;
#N canvas 506 490 235 244 display_mtx_btn 0;
#X obj 11 212 s \$0-ns_select_mv_rcv;
#X obj 31 182 s \$0-ns_select_mv_norm_rcv;
#X obj 31 42 r \$0-ns_select_mv_snd;
#X obj 11 12 r \$0-display_mtx_snd;
#X obj 11 142 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 31 112 set \$1;
#X obj 31 82 > 0;
#X obj 106 82 select 2;
#X msg 106 112 1;
#X connect 2 0 6 0;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X restore 343 316 pd display_mtx_btn;
#X obj 287 276 mtx_squareform;
#X obj 157 326 heatmap __;
#X obj 47 36 loadbang;
#X connect 0 0 3 0;
#X connect 1 0 18 0;
#X connect 2 0 20 0;
#X connect 3 0 20 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 7 0;
#X connect 6 1 8 0;
#X connect 6 1 4 0;
#X connect 6 1 12 0;
#X connect 6 2 2 0;
#X connect 6 2 5 0;
#X connect 6 2 8 0;
#X connect 6 2 11 0;
#X connect 7 0 5 0;
#X connect 7 0 16 0;
#X connect 7 0 21 0;
#X connect 8 0 15 0;
#X connect 8 0 21 4;
#X connect 9 0 2 0;
#X connect 10 0 9 0;
#X connect 11 0 10 1;
#X connect 12 0 10 1;
#X connect 13 0 6 0;
#X connect 14 0 10 0;
#X connect 14 0 21 1;
#X connect 15 0 17 0;
#X connect 15 0 21 0;
#X connect 16 0 15 1;
#X connect 17 0 15 1;
#X connect 18 0 10 0;
#X connect 18 1 2 1;
#X connect 20 0 21 2;
#X connect 22 0 7 0;
#X restore 59 99 pd display_____;
#X obj 262 19 unpack f f f f;
#X obj 230 -21 t a a;
#X obj 162 19 list split 2;
#X connect 0 0 14 0;
#X connect 7 0 8 1;
#X connect 8 0 10 0;
#X connect 9 0 7 0;
#X connect 10 0 17 0;
#X connect 10 0 0 0;
#X connect 10 0 13 0;
#X connect 11 0 23 0;
#X connect 12 0 26 0;
#X connect 15 0 23 3;
#X connect 16 0 10 3;
#X connect 20 0 8 0;
#X connect 20 1 24 0;
#X connect 20 2 24 1;
#X connect 22 0 20 0;
#X connect 23 0 21 0;
#X connect 25 1 9 1;
#X connect 25 2 9 0;
#X connect 25 3 0 1;
#X connect 26 0 27 0;
#X connect 26 1 25 0;
#X connect 27 0 20 1;
#X restore 19 71 pd segmentation;
#X obj 300 101 outlet parameters;
#N canvas 103 23 537 494 make_parameters_list___ 1;
#X obj -47 33 inlet;
#X obj 101 415 outlet;
#X obj 161 415 outlet;
#N canvas 246 560 543 350 wsize_processor 0;
#X obj 26 4 inlet window_size;
#X obj 184 304 outlet;
#X text 175 59 convert input to nearest upper even number;
#X text 175 19 allow numbers equal or greater than 2;
#X obj 128 184 i;
#X obj 128 244 mod 2;
#X obj 26 34 moses 2;
#X obj 184 274 +;
#X obj 72 144 delay;
#X obj 128 214 trigger a a;
#X obj 72 84 trigger a a;
#X text 175 39 allow last of a stream of numbers within X ms;
#X msg 72 114 1;
#X connect 0 0 6 0;
#X connect 4 0 9 0;
#X connect 5 0 7 0;
#X connect 6 1 10 0;
#X connect 7 0 1 0;
#X connect 8 0 4 0;
#X connect 9 0 5 0;
#X connect 9 1 7 1;
#X connect 10 0 12 0;
#X connect 10 1 4 1;
#X connect 12 0 8 0;
#X restore -47 293 pd wsize_processor;
#X text 99 3 1) N (number of dimensions / features);
#X text 99 23 2) n_nov (novelty window size);
#X text 99 43 3) n_filt/n_nov (smooth);
#X text 100 63 4) theta (peak threshold);
#N canvas 409 610 207 192 init_trig 0;
#X obj 99 13 inlet;
#X obj -31 43 loadbang;
#X obj 20 127 spigot;
#X obj -31 83 delay 1000;
#X msg 59 83 1;
#X msg 99 83 0;
#X obj 20 157 outlet;
#X obj 99 43 bang;
#X connect 0 0 7 0;
#X connect 1 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 6 0;
#X connect 3 0 2 0;
#X connect 4 0 2 1;
#X connect 5 0 2 1;
#X connect 7 0 5 0;
#X restore 8 93 pd init_trig;
#X msg 8 123 \$2 \$3 \$4 \$1;
#X obj -47 193 unpack 12 1 0.2 3;
#X obj 101 333 pack f f f f;
#X text 195 364 N back to the top;
#X msg 101 363 \$4 \$1 \$2 \$3;
#X text 102 124 N to the end so that n_nov triggers pack below;
#X connect 0 0 8 0;
#X connect 0 0 9 0;
#X connect 3 0 11 0;
#X connect 8 0 10 0;
#X connect 9 0 10 0;
#X connect 10 0 3 0;
#X connect 10 1 11 1;
#X connect 10 2 11 2;
#X connect 10 3 11 3;
#X connect 11 0 13 0;
#X connect 13 0 1 0;
#X connect 13 0 2 0;
#X restore 121 41 pd make_parameters_list___;
#X obj 19 11 inlet signal;
#X obj 197 101 outlet sig_rs;
#X obj 197 71 r \$0-rs_ND;
#X text 438 101 Juan Ignacio Mendoza G. - 2022;
#X obj 443 11 inlet display heatmap;
#X obj 443 41 s \$0-display_mtx_snd;
#X obj 323 41 s \$0-reset_snd;
#X connect 0 0 13 0;
#X connect 3 0 6 0;
#X connect 4 0 2 0;
#X connect 4 1 1 0;
#X connect 6 0 4 1;
#X connect 6 1 5 0;
#X connect 7 0 4 0;
#X connect 9 0 8 0;
#X connect 11 0 12 0;
